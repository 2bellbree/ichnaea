

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Geolocate &mdash; Ichnaea 1.3 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Ichnaea 1.3 documentation" href="../index.html"/>
        <link rel="up" title="Services API" href="index.html"/>
        <link rel="next" title="Country" href="country.html"/>
        <link rel="prev" title="Services API" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="../index.html" class="icon icon-home"> Ichnaea
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../usage.html">Using the Service</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../usage.html#http-api">HTTP API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage.html#applications-libraries">Applications / Libraries</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Services API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#api-access-keys">API Access Keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#errors">Errors</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#invalid-api-key">Invalid API Key</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#api-key-limit">API Key Limit</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#parse-error">Parse Error</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#service-error">Service Error</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#apis">APIs</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="">Geolocate</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#request">Request</a></li>
<li class="toctree-l4"><a class="reference internal" href="#field-definition">Field Definition</a></li>
<li class="toctree-l4"><a class="reference internal" href="#response">Response</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="country.html">Country</a><ul>
<li class="toctree-l4"><a class="reference internal" href="country.html#request">Request</a></li>
<li class="toctree-l4"><a class="reference internal" href="country.html#response">Response</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="geosubmit2.html">Geosubmit Version 2</a><ul>
<li class="toctree-l4"><a class="reference internal" href="geosubmit2.html#request">Request</a></li>
<li class="toctree-l4"><a class="reference internal" href="geosubmit2.html#field-definition">Field Definition</a></li>
<li class="toctree-l4"><a class="reference internal" href="geosubmit2.html#response">Response</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="geosubmit.html">Geosubmit (Deprecated)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="geosubmit.html#request">Request</a></li>
<li class="toctree-l4"><a class="reference internal" href="geosubmit.html#field-definition">Field Definition</a></li>
<li class="toctree-l4"><a class="reference internal" href="geosubmit.html#response">Response</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="search.html">Search (Deprecated)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="search.html#request">Request</a></li>
<li class="toctree-l4"><a class="reference internal" href="search.html#field-definition">Field Definition</a></li>
<li class="toctree-l4"><a class="reference internal" href="search.html#response">Response</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="submit.html">Submit (Deprecated)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="submit.html#request">Request</a></li>
<li class="toctree-l4"><a class="reference internal" href="submit.html#field-definition">Field Definition</a></li>
<li class="toctree-l4"><a class="reference internal" href="submit.html#response">Response</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../import_export.html">Data Import / Export</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../import_export.html#cell-fields">Cell Fields</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../deploy.html">Installing / Deploying</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../deploy.html#mysql-amazon-rds">MySQL / Amazon RDS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../deploy.html#redis-amazon-elasticache">Redis / Amazon ElastiCache</a></li>
<li class="toctree-l2"><a class="reference internal" href="../deploy.html#amazon-s3">Amazon S3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../deploy.html#statsd-sentry">Statsd / Sentry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../deploy.html#dependencies">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../deploy.html#code">Code</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../config.html">Application Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../config.html#assets">Assets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../config.html#cache">Cache</a></li>
<li class="toctree-l2"><a class="reference internal" href="../config.html#celery">Celery</a></li>
<li class="toctree-l2"><a class="reference internal" href="../config.html#database">Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="../config.html#geoip">GeoIP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../config.html#sentry">Sentry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../config.html#statsd">StatsD</a></li>
<li class="toctree-l2"><a class="reference internal" href="../config.html#export">Export</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../config.html#bucket-export">Bucket Export</a></li>
<li class="toctree-l3"><a class="reference internal" href="../config.html#internal-export">Internal Export</a></li>
<li class="toctree-l3"><a class="reference internal" href="../config.html#https-export">HTTPS Export</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../config.html#import">Import</a></li>
<li class="toctree-l2"><a class="reference internal" href="../config.html#locate-fallback">Locate Fallback</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../development.html">Development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../development.html#documentation">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development.html#python-dependencies">Python Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development.html#css-js-images">CSS / JS / Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development.html#cleanup">Cleanup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development.html#release-build">Release Build</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../testing.html">Testing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../testing.html#unit-tests">Unit Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing.html#testing-tasks">Testing Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing.html#testing-multiple-python-versions">Testing Multiple Python Versions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../calculation.html">Calculation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../calculation.html#accuracy">Accuracy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../calculation.html#wifi">WiFi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../calculation.html#gsm">GSM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../calculation.html#wcdma-umts">WCDMA / UMTS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../calculation.html#lte">LTE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../calculation.html#cdma">CDMA</a></li>
<li class="toctree-l3"><a class="reference internal" href="../calculation.html#geoip">GeoIP</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../metrics.html">Metrics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../metrics.html#api-request-metrics">API Request Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics.html#api-user-metrics">API User Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics.html#api-query-metrics">API Query Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics.html#api-result-metrics">API Result Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics.html#api-source-metrics">API Source Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics.html#api-fallback-source-metrics">API Fallback Source Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics.html#data-pipeline-metrics">Data Pipeline Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics.html#data-pipeline-export-metrics">Data Pipeline Export Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics.html#internal-monitoring">Internal Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics.html#http-counters">HTTP Counters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics.html#http-timers">HTTP Timers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics.html#task-timers">Task Timers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics.html#datamaps-timers">Datamaps Timers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../internal_api/index.html">Internal Code API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../internal_api/index.html#indices-and-tables">Indices and Tables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../internal_api/api/index.html"><code class="docutils literal"><span class="pre">ichnaea.api</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../internal_api/api/config.html"><code class="docutils literal"><span class="pre">ichnaea.api.config</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../internal_api/api/exceptions.html"><code class="docutils literal"><span class="pre">ichnaea.api.exceptions</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../internal_api/api/locate/index.html"><code class="docutils literal"><span class="pre">ichnaea.api.locate</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../internal_api/api/rate_limit.html"><code class="docutils literal"><span class="pre">ichnaea.api.rate_limit</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../internal_api/api/submit/index.html"><code class="docutils literal"><span class="pre">ichnaea.api.submit</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../internal_api/api/views.html"><code class="docutils literal"><span class="pre">ichnaea.api.views</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../internal_api/async/index.html"><code class="docutils literal"><span class="pre">ichnaea.async</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../internal_api/async/app.html"><code class="docutils literal"><span class="pre">ichnaea.async.app</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../internal_api/async/config.html"><code class="docutils literal"><span class="pre">ichnaea.async.config</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../internal_api/async/schedule.html"><code class="docutils literal"><span class="pre">ichnaea.async.schedule</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../internal_api/async/settings.html"><code class="docutils literal"><span class="pre">ichnaea.async.settings</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../internal_api/async/task.html"><code class="docutils literal"><span class="pre">ichnaea.async.task</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../internal_api/cache.html"><code class="docutils literal"><span class="pre">ichnaea.cache</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internal_api/config.html"><code class="docutils literal"><span class="pre">ichnaea.config</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internal_api/constants.html"><code class="docutils literal"><span class="pre">ichnaea.constants</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internal_api/db.html"><code class="docutils literal"><span class="pre">ichnaea.db</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internal_api/exceptions.html"><code class="docutils literal"><span class="pre">ichnaea.exceptions</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internal_api/floatjson.html"><code class="docutils literal"><span class="pre">ichnaea.floatjson</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internal_api/_geocalc.html"><code class="docutils literal"><span class="pre">ichnaea._geocalc</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internal_api/geocalc.html"><code class="docutils literal"><span class="pre">ichnaea.geocalc</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internal_api/geoip.html"><code class="docutils literal"><span class="pre">ichnaea.geoip</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internal_api/http.html"><code class="docutils literal"><span class="pre">ichnaea.http</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internal_api/internaljson.html"><code class="docutils literal"><span class="pre">ichnaea.internaljson</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internal_api/log.html"><code class="docutils literal"><span class="pre">ichnaea.log</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internal_api/models/index.html"><code class="docutils literal"><span class="pre">ichnaea.models</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../internal_api/models/base.html"><code class="docutils literal"><span class="pre">ichnaea.models.base</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../internal_api/models/cell.html"><code class="docutils literal"><span class="pre">ichnaea.models.cell</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../internal_api/models/constants.html"><code class="docutils literal"><span class="pre">ichnaea.models.constants</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../internal_api/models/hashkey.html"><code class="docutils literal"><span class="pre">ichnaea.models.hashkey</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../internal_api/models/wifi.html"><code class="docutils literal"><span class="pre">ichnaea.models.wifi</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../internal_api/queue.html"><code class="docutils literal"><span class="pre">ichnaea.queue</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internal_api/util.html"><code class="docutils literal"><span class="pre">ichnaea.util</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internal_api/webapp/index.html"><code class="docutils literal"><span class="pre">ichnaea.webapp</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../internal_api/webapp/app.html"><code class="docutils literal"><span class="pre">ichnaea.webapp.app</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../internal_api/webapp/config.html"><code class="docutils literal"><span class="pre">ichnaea.webapp.config</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../internal_api/webapp/monitor.html"><code class="docutils literal"><span class="pre">ichnaea.webapp.monitor</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../internal_api/webapp/settings.html"><code class="docutils literal"><span class="pre">ichnaea.webapp.settings</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../internal_api/webapp/view.html"><code class="docutils literal"><span class="pre">ichnaea.webapp.view</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../internal_api/webapp/worker.html"><code class="docutils literal"><span class="pre">ichnaea.webapp.worker</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#unreleased">1.3 (unreleased)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#untagged">Untagged</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#migrations">Migrations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#changes">Changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id1">20150813105600</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id2">Changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id3">20150806105100</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id4">Migrations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id5">Changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id6">20150730143600</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id7">Changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id8">20150730111000</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id9">Migrations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id10">Changes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#id11">1.2 (2015-07-15)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id12">20150716174000</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id13">Changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id14">Migrations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id15">Changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id16">20150707130400</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id17">Migrations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id18">Changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id19">20150616104200</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id20">Migrations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id21">Changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id22">20150610103900</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id23">Migrations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id24">Changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id25">20150604164500</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id26">Changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id27">20150528085200</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id28">Changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id29">20150522094900</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id30">Changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id31">20150507103300</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id32">Changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id33">20150505113200</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id34">Migrations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id35">Changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id36">20150423105800</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id37">Changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id38">20150416111700</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id39">Migrations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id40">Changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id41">20150409120500</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id42">Changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id43">20150320100800</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id44">Changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id45">20150309175500</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id46">20150305122500</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id47">Migrations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id48">Changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id49">20150211113000</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id50">Changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id51">20150209110000</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id52">Changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id53">20150203093000</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id54">Changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id55">20150127130000</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id56">Migrations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id57">Changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id58">20150122140000</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id59">Migrations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id60">Changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id61">20150105140000</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id62">Migrations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changelog.html#id63">Changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id64">20141218093500</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id65">20141120130000</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id66">20141103125500</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id67">20141030113700</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#id68">1.1 (2014-10-27)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id69">20141027122000</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id70">20141023094000</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id71">20141016123300</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id72">20141014161400</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id73">20141009121300</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id74">20141002103900</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id75">20140904094000</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id76">20140901114000</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id77">20140821114200</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id78">20140812120000</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id79">20140730133000</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id80">20140715114000</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#id81">1.0 (2014-07-14)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#id82">0.1 (2013-11-22)</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Ichnaea</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Services API</a> &raquo;</li>
      
    <li>Geolocate</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/api/geolocate.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="geolocate">
<span id="api-geolocate-latest"></span><span id="api-geolocate"></span><h1>Geolocate<a class="headerlink" href="#geolocate" title="Permalink to this headline">¶</a></h1>
<dl class="docutils">
<dt>Purpose</dt>
<dd>Determine the current location based on data provided about nearby
cell or WiFi networks and based on the IP address used to access
the service.</dd>
</dl>
<div class="section" id="request">
<h2>Request<a class="headerlink" href="#request" title="Permalink to this headline">¶</a></h2>
<p>Geolocate requests are submitted using a POST request to the URL:</p>
<div class="highlight-python"><div class="highlight"><pre>https://location.services.mozilla.com/v1/geolocate?key=&lt;API_KEY&gt;
</pre></div>
</div>
<p>This implements almost the same interface as the <a class="reference external" href="https://developers.google.com/maps/documentation/business/geolocation/">Google Maps Geolocation
API</a>
endpoint, hence referred to as <cite>GLS</cite> or Google Location Service API.</p>
<p>Our service implements all of the standard GLS API with a couple of additions.</p>
<p>Geolocate requests are submitted using a POST request with a JSON body:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;carrier&quot;</span><span class="o">:</span> <span class="s2">&quot;Telecom&quot;</span><span class="p">,</span>
    <span class="s2">&quot;homeMobileCountryCode&quot;</span><span class="o">:</span> <span class="mi">208</span><span class="p">,</span>
    <span class="s2">&quot;homeMobileNetworkCode&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;cellTowers&quot;</span><span class="o">:</span> <span class="p">[{</span>
        <span class="s2">&quot;radioType&quot;</span><span class="o">:</span> <span class="s2">&quot;wcdma&quot;</span><span class="p">,</span>
        <span class="s2">&quot;mobileCountryCode&quot;</span><span class="o">:</span> <span class="mi">208</span><span class="p">,</span>
        <span class="s2">&quot;mobileNetworkCode&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;locationAreaCode&quot;</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s2">&quot;cellId&quot;</span><span class="o">:</span> <span class="mi">1234567</span><span class="p">,</span>
        <span class="s2">&quot;age&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;psc&quot;</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="s2">&quot;signalStrength&quot;</span><span class="o">:</span> <span class="o">-</span><span class="mi">60</span><span class="p">,</span>
        <span class="s2">&quot;timingAdvance&quot;</span><span class="o">:</span> <span class="mi">1</span>
    <span class="p">}],</span>
    <span class="s2">&quot;wifiAccessPoints&quot;</span><span class="o">:</span> <span class="p">[{</span>
        <span class="s2">&quot;macAddress&quot;</span><span class="o">:</span> <span class="s2">&quot;01:23:45:67:89:ab&quot;</span><span class="p">,</span>
        <span class="s2">&quot;age&quot;</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="s2">&quot;channel&quot;</span><span class="o">:</span> <span class="mi">11</span><span class="p">,</span>
        <span class="s2">&quot;frequency&quot;</span><span class="o">:</span> <span class="mi">2412</span><span class="p">,</span>
        <span class="s2">&quot;signalStrength&quot;</span><span class="o">:</span> <span class="o">-</span><span class="mi">51</span><span class="p">,</span>
        <span class="s2">&quot;signalToNoiseRatio&quot;</span><span class="o">:</span> <span class="mi">13</span>
    <span class="p">},</span> <span class="p">{</span>
        <span class="s2">&quot;macAddress&quot;</span><span class="o">:</span> <span class="s2">&quot;01:23:45:67:89:cd&quot;</span>
    <span class="p">}],</span>
    <span class="s2">&quot;fallbacks&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;lacf&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;ipf&quot;</span><span class="o">:</span> <span class="kc">true</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="field-definition">
<h2>Field Definition<a class="headerlink" href="#field-definition" title="Permalink to this headline">¶</a></h2>
<p>All of the fields are optional. Though in order to get a WiFi based position
estimate at least two WiFi networks need to be provided and for each the
<cite>macAddress</cite> needs to be known. The minimum of two networks is a mandatory
privacy restriction for WiFi based location services.</p>
<p>Cell based position estimates require each cell record to contain at least
the five <cite>radioType</cite>, <cite>mobileCountryCode</cite>, <cite>mobileNetworkCode</cite>,
<cite>locationAreaCode</cite> and <cite>cellId</cite> values, except for CDMA networks where the
<cite>mobileCountryCode</cite> field is optional.</p>
<p>Position estimates do get a lot more precise if in addition to these unique
identifiers at least <cite>signalStrength</cite> data can be provided for each entry.</p>
<p>Note that all the cell JSON keys use the same names for all radio types,
generally using the official GSM name to denote similar concepts, even
though the actual client side API&#8217;s might use different names for each
radio type and thus must be mapped to the JSON keys.</p>
<div class="section" id="global-fields">
<h3>Global Fields<a class="headerlink" href="#global-fields" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>carrier</dt>
<dd>The clear text name of the cell carrier / operator.</dd>
<dt>homeMobileCountryCode</dt>
<dd>The mobile country code stored on the SIM card.</dd>
<dt>homeMobileNetworkCode</dt>
<dd>The mobile network code stored on the SIM card.</dd>
<dt>radioType</dt>
<dd>Same as the radioType entry in each cell record. If all the cell
entries have the same radioType, it can be provided at the top level
instead.</dd>
</dl>
</div>
<div class="section" id="cell-tower-fields">
<h3>Cell Tower Fields<a class="headerlink" href="#cell-tower-fields" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>radioType</dt>
<dd>The type of radio network. One of <cite>gsm</cite>, <cite>wcdma</cite>, <cite>lte</cite> or <cite>cdma</cite>.
This is a custom extension to the GLS API, which only defines the
top-level radioType field.</dd>
<dt>mobileCountryCode</dt>
<dd>The mobile country code. For CMDA networks it is not defined.
If the device is a combined GSM/CDMA phone, the GSM mobile country
code might be available and used for the CDMA network.</dd>
<dt>mobileNetworkCode</dt>
<dd>The mobile network code or the system id for CDMA networks.</dd>
<dt>locationAreaCode</dt>
<dd>The location area code for GSM and WCDMA networks. The tracking area
code for LTE networks. The network id for CDMA networks.</dd>
<dt>cellId</dt>
<dd>The cell id or cell identity. The base station id for CDMA networks.</dd>
<dt>age</dt>
<dd>The number of milliseconds since this networks was last detected.</dd>
<dt>psc</dt>
<dd>The primary scrambling code for WCDMA and physical cell id for LTE.
This is an addition to the GLS API.</dd>
<dt>signalStrength</dt>
<dd>The signal strength for this cell network, either the RSSI or RSCP.</dd>
<dt>timingAdvance</dt>
<dd>The timing advance value for this cell network.</dd>
</dl>
</div>
<div class="section" id="wifi-access-point-fields">
<h3>WiFi Access Point Fields<a class="headerlink" href="#wifi-access-point-fields" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Hidden WiFi networks and those whose SSID (clear text name)
ends with the string <cite>_nomap</cite> must NOT be used for privacy
reasons.</p>
</div>
<dl class="docutils">
<dt>macAddress</dt>
<dd>The BSSID of the WiFi network.</dd>
<dt>age</dt>
<dd>The number of milliseconds since this networks was last detected.</dd>
<dt>channel</dt>
<dd>The WiFi channel, often 1 - 13 for networks in the 2.4GHz range.</dd>
<dt>frequency</dt>
<dd>The frequency in MHz of the channel over which the client is
communicating with the access point. This is an addition to the
GLS API.</dd>
<dt>signalStrength</dt>
<dd>The received signal strength (RSSI) in dBm.</dd>
<dt>signalToNoiseRatio</dt>
<dd>The current signal to noise ratio measured in dB.</dd>
</dl>
</div>
<div class="section" id="fallback-fields">
<h3>Fallback Fields<a class="headerlink" href="#fallback-fields" title="Permalink to this headline">¶</a></h3>
<p>The fallback section is a custom addition to the GLS API.</p>
<p>By default both a GeoIP based position fallback and a fallback based
on cell location areas (lac&#8217;s) are enabled. Simply omit the <cite>fallbacks</cite>
section if you want to use the defaults. Change the values to <cite>false</cite>
if you want to disable either of the fallbacks.</p>
<dl class="docutils">
<dt>lacf</dt>
<dd>If no exact cell match can be found, fall back from exact cell
position estimates to more coarse grained cell location area
estimates, rather than going directly to an even worse GeoIP
based estimate.</dd>
<dt>ipf</dt>
<dd>If no position can be estimated based on any of the provided data
points, fall back to an estimate based on a GeoIP database based on
the senders IP address at the time of the query.</dd>
</dl>
</div>
<div class="section" id="deviations-from-gls-api">
<h3>Deviations From GLS API<a class="headerlink" href="#deviations-from-gls-api" title="Permalink to this headline">¶</a></h3>
<p>As mentioned in the specific fields, our API has a couple of extensions.</p>
<ul class="simple">
<li>Cell entries allow to specify the <cite>radioType</cite> per cell network
instead of globally. This allows for example doing queries with data
from multiple active SIM cards where one of them is on a GSM
connection while the other uses a WCDMA connection.</li>
<li>Cell entries take an extra <cite>psc</cite> field.</li>
<li>The WiFi macAddress field takes both upper- and lower-case characters.
It also tolerates <cite>:</cite>, <cite>-</cite> or no separator and internally strips them.</li>
<li>WiFi entries take an extra <cite>frequency</cite> field.</li>
<li>The <cite>fallbacks</cite> section allows some control over the more coarse
grained position sources. If no exact match can be found, these can
be used to return a <cite>404 Not Found</cite> rather than a coarse grained
estimate with a large accuracy value.</li>
<li>If either the GeoIP or location area fallbacks where used to determine
the response, an additional fallback key will be returned in the response.</li>
</ul>
</div>
</div>
<div class="section" id="response">
<h2>Response<a class="headerlink" href="#response" title="Permalink to this headline">¶</a></h2>
<p>A successful response returns a position estimate and an accuracy field.
Combined these two describe the center and radius of a circle. The users
true position should be inside the circle with a 95th percentile
confidence value. The accuracy is measured in meters.</p>
<p>If the position is to be shown on a map and the returned accuracy is
large, it may be advisable to zoom out the map, so that all of the
circle can be seen, even if the circle itself is not shown graphically.
That way a user should still see his true position on the map and can
further zoom in.</p>
<p>If instead the returned position is shown highly zoomed in, the user
may just see an arbitrary location that they don&#8217;t recognize at all.
This typically happens when GeoIP based results are returned and the
returned position is the center of a city or the center of a country.</p>
<p>A successful response will be:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;location&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;lat&quot;</span><span class="o">:</span> <span class="o">-</span><span class="mf">22.7539192</span><span class="p">,</span>
        <span class="s2">&quot;lng&quot;</span><span class="o">:</span> <span class="o">-</span><span class="mf">43.4371081</span>
    <span class="p">},</span>
    <span class="s2">&quot;accuracy&quot;</span><span class="o">:</span> <span class="mf">100.0</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Should the response be based on a GeoIP estimate:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;location&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;lat&quot;</span><span class="o">:</span> <span class="mf">51.0</span><span class="p">,</span>
        <span class="s2">&quot;lng&quot;</span><span class="o">:</span> <span class="o">-</span><span class="mf">0.1</span>
    <span class="p">},</span>
    <span class="s2">&quot;accuracy&quot;</span><span class="o">:</span> <span class="mf">600000.0</span><span class="p">,</span>
    <span class="s2">&quot;fallback&quot;</span><span class="o">:</span> <span class="s2">&quot;ipf&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Alternatively the fallback field can also state <cite>lacf</cite> for an estimate
based on a cell location area.</p>
<p>If no position information could be determined, a HTTP status code 404 will
be returned:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;error&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;errors&quot;</span><span class="o">:</span> <span class="p">[{</span>
            <span class="s2">&quot;domain&quot;</span><span class="o">:</span> <span class="s2">&quot;geolocation&quot;</span><span class="p">,</span>
            <span class="s2">&quot;reason&quot;</span><span class="o">:</span> <span class="s2">&quot;notFound&quot;</span><span class="p">,</span>
            <span class="s2">&quot;message&quot;</span><span class="o">:</span> <span class="s2">&quot;Not found&quot;</span><span class="p">,</span>
        <span class="p">}],</span>
        <span class="s2">&quot;code&quot;</span><span class="o">:</span> <span class="mi">404</span><span class="p">,</span>
        <span class="s2">&quot;message&quot;</span><span class="o">:</span> <span class="s2">&quot;Not found&quot;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="country.html" class="btn btn-neutral float-right" title="Country" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Services API" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013-2015, Mozilla.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.3',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>